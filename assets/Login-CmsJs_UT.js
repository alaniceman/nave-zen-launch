import{u as y,ai as w,r as d,j as e,I as m,B as C,f as F,g as t}from"./index-1pEVpULT.js";import{C as N,a as I,b as S,d as v,c as E}from"./card-CF-BzD_C.js";import{u as L}from"./index.esm-DVUGuu2A.js";import{o as A,s as u,t as B}from"./zod-DDmi-SKj.js";import{F as T,a as x,b as p,c as j,d as h,e as f}from"./form-CPoF7iA5.js";import"./label-D2tu44sv.js";const k=A({email:u().email("Email inválido"),password:u().min(8,"La contraseña debe tener al menos 8 caracteres")});function q(){const i=y(),{user:o,isAdmin:c,signIn:g}=w(),[a,l]=d.useState(!1),r=L({resolver:B(k),defaultValues:{email:"",password:""}});d.useEffect(()=>{o&&c&&i("/admin/agenda",{replace:!0})},[o,c,i]);const b=async s=>{l(!0);try{const{error:n}=await g(s.email,s.password);if(n){t.error(n.message||"Error al iniciar sesión");return}t.success("¡Bienvenido!"),i("/admin/agenda",{replace:!0})}catch(n){console.error("Login error:",n),t.error("Error inesperado al iniciar sesión")}finally{l(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:e.jsxs(N,{className:"w-full max-w-md",children:[e.jsxs(I,{className:"space-y-1",children:[e.jsx(S,{className:"text-2xl font-bold text-center",children:"Panel de Administración"}),e.jsx(v,{className:"text-center",children:"Ingresa tus credenciales para acceder"})]}),e.jsx(E,{children:e.jsx(T,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(b),className:"space-y-4",children:[e.jsx(x,{control:r.control,name:"email",render:({field:s})=>e.jsxs(p,{children:[e.jsx(j,{children:"Email"}),e.jsx(h,{children:e.jsx(m,{type:"email",placeholder:"admin@navestudio.cl",...s,disabled:a})}),e.jsx(f,{})]})}),e.jsx(x,{control:r.control,name:"password",render:({field:s})=>e.jsxs(p,{children:[e.jsx(j,{children:"Contraseña"}),e.jsx(h,{children:e.jsx(m,{type:"password",placeholder:"••••••••",...s,disabled:a})}),e.jsx(f,{})]})}),e.jsx(C,{type:"submit",className:"w-full",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Iniciando sesión..."]}):"Iniciar Sesión"})]})})})]})})}export{q as default};
