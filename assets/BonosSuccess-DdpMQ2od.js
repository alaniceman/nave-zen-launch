import{u as f,k as h,d as p,r as d,j as e,H as g,l as j,B as m,s as b}from"./index-CzR2IjBQ.js";import{F as N}from"./Footer-BRKIt7jW.js";import{u as y}from"./useFacebookConversionsAPI-CQk1OlNW.js";import{C as v}from"./circle-check-CiZjY4vD.js";function E(){const t=f(),[u]=h(),a=u.get("external_reference"),{trackEvent:r}=p(),{trackPurchase:n}=y(),[i,x]=d.useState(!1);return d.useEffect(()=>{(async()=>{var c;if(!a||i)return;const{data:s}=await b.from("package_orders").select("final_price, status, buyer_email, buyer_name, buyer_phone, session_packages(name)").eq("id",a).maybeSingle();if((s==null?void 0:s.status)==="paid"){const l=((c=s.session_packages)==null?void 0:c.name)||"Paquete de sesiones",o=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;r("Purchase",{value:s.final_price,currency:"CLP",content_name:l,content_type:"product",content_ids:[a]},o),n({userEmail:s.buyer_email,userName:s.buyer_name,userPhone:s.buyer_phone||void 0,value:s.final_price,currency:"CLP",contentName:l,orderId:a,eventId:o}),x(!0)}})()},[a,i,r,n]),e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx("title",{children:"Compra Exitosa - Studio La Nave"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx("main",{className:"min-h-screen pt-24 pb-16 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 text-green-600 mb-6",children:e.jsx(v,{className:"h-10 w-10"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"¡Compra Exitosa!"}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(j,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Revisa tu email"})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Te hemos enviado un email con todos tus códigos de sesión."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Guarda ese email para tener tus códigos siempre disponibles."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"¿Cómo usar tus códigos?"}),e.jsxs("ol",{className:"text-left space-y-3 max-w-md mx-auto",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ve a la página de agenda y selecciona el profesional, fecha y hora"})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:'Ingresa uno de tus códigos en el campo "¿Tienes un código de sesión?"'})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-bold",children:"3"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"¡Listo! Tu sesión quedará confirmada sin costo adicional"})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-center mt-8",children:[e.jsx(m,{onClick:()=>t("/agenda-nave-studio"),size:"lg",children:"Agendar ahora"}),e.jsx(m,{onClick:()=>t("/"),variant:"outline",size:"lg",children:"Volver al inicio"})]})]})}),e.jsx(N,{})]})}export{E as default};
