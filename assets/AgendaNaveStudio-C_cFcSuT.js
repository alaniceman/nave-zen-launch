import{r as b,j as n,a as ge,X as Ve,B as G,s as V,Y as xt,Z as yt,_ as gt,$ as bt,e as Nt,a0 as jt,f as ee,a1 as _t,I as ue,g as J,L as wt,W as Ct,k as St,d as Dt}from"./index-D2jBbZS7.js";import{t as M,s as he,a as oe,g as qe,m as kt,b as Mt,c as Pe,d as q,e as Pt,f as Ot,h as Oe,i as Lt,j as It,k as W,l as tt,n as Le}from"./es-BGq_Vek6.js";import{a as P}from"./addDays-B8LDbFV8.js";import{a as F,s as I}from"./startOfMonth-DgSnpQ6N.js";import{e as Ie}from"./endOfMonth-BdjgvUvn.js";import{d as ie}from"./differenceInCalendarMonths-CpYfiirj.js";import{C as at,a as Et}from"./chevron-right-DIT06g0N.js";import{C as se}from"./card-OYLB4Vmq.js";import{S as Ue,a as ze,b as Ge,c as Ke,d as be}from"./select-DhA8D-pX.js";import{C as De}from"./clock-fAH4_A1k.js";import{f as me}from"./index-Cj0rGzeA.js";import{p as Q}from"./parseISO-B7l4lJ9E.js";import{U as Ee}from"./user-B9YOfkA4.js";import{u as Wt}from"./index.esm-DtCC8THk.js";import{o as Tt,s as fe,t as Ft}from"./zod-BDXfkOj5.js";import{L as re}from"./label-MfefNPtF.js";import{T as At}from"./textarea-XB-NZ12G.js";import{C as nt}from"./check-DlvlGAKd.js";import{D as Rt}from"./dollar-sign-DoVVBuHW.js";import{C as Bt}from"./calendar-SFUKuje1.js";import{T as Yt}from"./tag-C-hmsiJe.js";import{G as Ht}from"./GiftCardSection-IK1dVNcB.js";import{P as $t}from"./package-ZeQPpKDc.js";import{u as Vt}from"./useFacebookConversionsAPI-Dq0R5K2F.js";import"./index-DuNgS-Bs.js";import"./index-q10XEKNx.js";import"./chevron-down-FFjHraMF.js";import"./chevron-up-FXiSCfMY.js";function ke(e,a){const t=a*7;return P(e,t)}function qt(e,a){return F(e,a*12)}function Ut(e){let a;return e.forEach(function(t){const r=M(t);(a===void 0||a<r||isNaN(Number(r)))&&(a=r)}),a||new Date(NaN)}function zt(e){let a;return e.forEach(t=>{const r=M(t);(!a||a>r||isNaN(+r))&&(a=r)}),a||new Date(NaN)}function L(e,a){const t=he(e),r=he(a);return+t==+r}function Gt(e,a,t){const r=oe(e,t),s=oe(a,t),o=+r-qe(r),i=+s-qe(s);return Math.round((o-i)/kt)}function We(e,a){var l,c,f,d;const t=Mt(),r=(a==null?void 0:a.weekStartsOn)??((c=(l=a==null?void 0:a.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(f=t.locale)==null?void 0:f.options)==null?void 0:d.weekStartsOn)??0,s=M(e),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function rt(e){return We(e,{weekStartsOn:1})}function Kt(e){const a=M(e),t=a.getFullYear(),r=a.getMonth(),s=Pe(e,0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Zt(e){return Math.trunc(+M(e)/1e3)}function Xt(e){const a=M(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(0,0,0,0),a}function Jt(e,a){return Gt(Xt(e),I(e),a)+1}function Me(e,a){const t=M(e),r=M(a);return t.getTime()>r.getTime()}function st(e,a){const t=M(e),r=M(a);return+t<+r}function Te(e,a){const t=M(e),r=M(a);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function Qt(e,a){const t=M(e),r=M(a);return t.getFullYear()===r.getFullYear()}function Ne(e,a){return P(e,-a)}function je(e,a){const t=M(e),r=t.getFullYear(),s=t.getDate(),o=Pe(e,0);o.setFullYear(r,a,15),o.setHours(0,0,0,0);const i=Kt(o);return t.setMonth(a,Math.min(s,i)),t}function Ze(e,a){const t=M(e);return isNaN(+t)?Pe(e,NaN):(t.setFullYear(a),t)}var j=function(){return j=Object.assign||function(a){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=t[o])}return a},j.apply(this,arguments)};function ea(e,a){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)a.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(t[r[s]]=e[r[s]]);return t}function ot(e,a,t){for(var r=0,s=a.length,o;r<s;r++)(o||!(r in a))&&(o||(o=Array.prototype.slice.call(a,0,r)),o[r]=a[r]);return e.concat(o||Array.prototype.slice.call(a))}function le(e){return e.mode==="multiple"}function ce(e){return e.mode==="range"}function xe(e){return e.mode==="single"}var ta={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function aa(e,a){return W(e,"LLLL y",a)}function na(e,a){return W(e,"d",a)}function ra(e,a){return W(e,"LLLL",a)}function sa(e){return"".concat(e)}function oa(e,a){return W(e,"cccccc",a)}function ia(e,a){return W(e,"yyyy",a)}var la=Object.freeze({__proto__:null,formatCaption:aa,formatDay:na,formatMonthCaption:ra,formatWeekNumber:sa,formatWeekdayName:oa,formatYearCaption:ia}),ca=function(e,a,t){return W(e,"do MMMM (EEEE)",t)},da=function(){return"Month: "},ua=function(){return"Go to next month"},fa=function(){return"Go to previous month"},ma=function(e,a){return W(e,"cccc",a)},va=function(e){return"Week n. ".concat(e)},ha=function(){return"Year: "},pa=Object.freeze({__proto__:null,labelDay:ca,labelMonthDropdown:da,labelNext:ua,labelPrevious:fa,labelWeekNumber:va,labelWeekday:ma,labelYearDropdown:ha});function xa(){var e="buttons",a=ta,t=Pt,r={},s={},o=1,i={},l=new Date;return{captionLayout:e,classNames:a,formatters:la,labels:pa,locale:t,modifiersClassNames:r,modifiers:s,numberOfMonths:o,styles:i,today:l,mode:"default"}}function ya(e){var a=e.fromYear,t=e.toYear,r=e.fromMonth,s=e.toMonth,o=e.fromDate,i=e.toDate;return r?o=I(r):a&&(o=new Date(a,0,1)),s?i=Ie(s):t&&(i=new Date(t,11,31)),{fromDate:o?he(o):void 0,toDate:i?he(i):void 0}}var it=b.createContext(void 0);function ga(e){var a,t=e.initialProps,r=xa(),s=ya(t),o=s.fromDate,i=s.toDate,l=(a=t.captionLayout)!==null&&a!==void 0?a:r.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(xe(t)||le(t)||ce(t))&&(c=t.onSelect);var f=j(j(j({},r),t),{captionLayout:l,classNames:j(j({},r.classNames),t.classNames),components:j({},t.components),formatters:j(j({},r.formatters),t.formatters),fromDate:o,labels:j(j({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:j(j({},r.modifiers),t.modifiers),modifiersClassNames:j(j({},r.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:j(j({},r.styles),t.styles),toDate:i});return n.jsx(it.Provider,{value:f,children:e.children})}function C(){var e=b.useContext(it);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function lt(e){var a=C(),t=a.locale,r=a.classNames,s=a.styles,o=a.formatters.formatCaption;return n.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:t})})}function ba(e){return n.jsx("svg",j({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function ct(e){var a,t,r=e.onChange,s=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,f=C(),d=(t=(a=f.components)===null||a===void 0?void 0:a.IconDropdown)!==null&&t!==void 0?t:ba;return n.jsxs("div",{className:l,style:c,children:[n.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),n.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:s,onChange:r,children:o}),n.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[i,n.jsx(d,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function Na(e){var a,t=C(),r=t.fromDate,s=t.toDate,o=t.styles,i=t.locale,l=t.formatters.formatMonthCaption,c=t.classNames,f=t.components,d=t.labels.labelMonthDropdown;if(!r)return n.jsx(n.Fragment,{});if(!s)return n.jsx(n.Fragment,{});var h=[];if(Qt(r,s))for(var p=I(r),x=r.getMonth();x<=s.getMonth();x++)h.push(je(p,x));else for(var p=I(new Date),x=0;x<=11;x++)h.push(je(p,x));var y=function(u){var w=Number(u.target.value),g=je(I(e.displayMonth),w);e.onChange(g)},_=(a=f==null?void 0:f.Dropdown)!==null&&a!==void 0?a:ct;return n.jsx(_,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:y,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:h.map(function(u){return n.jsx("option",{value:u.getMonth(),children:l(u,{locale:i})},u.getMonth())})})}function ja(e){var a,t=e.displayMonth,r=C(),s=r.fromDate,o=r.toDate,i=r.locale,l=r.styles,c=r.classNames,f=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,p=[];if(!s)return n.jsx(n.Fragment,{});if(!o)return n.jsx(n.Fragment,{});for(var x=s.getFullYear(),y=o.getFullYear(),_=x;_<=y;_++)p.push(Ze(Ot(new Date),_));var u=function(g){var S=Ze(I(t),Number(g.target.value));e.onChange(S)},w=(a=f==null?void 0:f.Dropdown)!==null&&a!==void 0?a:ct;return n.jsx(w,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:u,value:t.getFullYear(),caption:d(t,{locale:i}),children:p.map(function(g){return n.jsx("option",{value:g.getFullYear(),children:d(g,{locale:i})},g.getFullYear())})})}function _a(e,a){var t=b.useState(e),r=t[0],s=t[1],o=a===void 0?r:a;return[o,s]}function wa(e){var a=e.month,t=e.defaultMonth,r=e.today,s=a||t||r||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&ie(o,s)<0){var f=-1*(c-1);s=F(o,f)}return i&&ie(s,i)<0&&(s=i),I(s)}function Ca(){var e=C(),a=wa(e),t=_a(a,e.month),r=t[0],s=t[1],o=function(i){var l;if(!e.disableNavigation){var c=I(i);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,o]}function Sa(e,a){for(var t=a.reverseMonths,r=a.numberOfMonths,s=I(e),o=I(F(s,r)),i=ie(o,s),l=[],c=0;c<i;c++){var f=F(s,c);l.push(f)}return t&&(l=l.reverse()),l}function Da(e,a){if(!a.disableNavigation){var t=a.toDate,r=a.pagedNavigation,s=a.numberOfMonths,o=s===void 0?1:s,i=r?o:1,l=I(e);if(!t)return F(l,i);var c=ie(t,e);if(!(c<o))return F(l,i)}}function ka(e,a){if(!a.disableNavigation){var t=a.fromDate,r=a.pagedNavigation,s=a.numberOfMonths,o=s===void 0?1:s,i=r?o:1,l=I(e);if(!t)return F(l,-i);var c=ie(l,t);if(!(c<=0))return F(l,-i)}}var dt=b.createContext(void 0);function Ma(e){var a=C(),t=Ca(),r=t[0],s=t[1],o=Sa(r,a),i=Da(r,a),l=ka(r,a),c=function(h){return o.some(function(p){return Te(h,p)})},f=function(h,p){c(h)||(p&&st(h,p)?s(F(h,1+a.numberOfMonths*-1)):s(h))},d={currentMonth:r,displayMonths:o,goToMonth:s,goToDate:f,previousMonth:l,nextMonth:i,isDateDisplayed:c};return n.jsx(dt.Provider,{value:d,children:e.children})}function de(){var e=b.useContext(dt);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Xe(e){var a,t=C(),r=t.classNames,s=t.styles,o=t.components,i=de().goToMonth,l=function(d){i(F(d,e.displayIndex?-e.displayIndex:0))},c=(a=o==null?void 0:o.CaptionLabel)!==null&&a!==void 0?a:lt,f=n.jsx(c,{id:e.id,displayMonth:e.displayMonth});return n.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[n.jsx("div",{className:r.vhidden,children:f}),n.jsx(Na,{onChange:l,displayMonth:e.displayMonth}),n.jsx(ja,{onChange:l,displayMonth:e.displayMonth})]})}function Pa(e){return n.jsx("svg",j({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Oa(e){return n.jsx("svg",j({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var pe=b.forwardRef(function(e,a){var t=C(),r=t.classNames,s=t.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var i=o.join(" "),l=j(j({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),n.jsx("button",j({},e,{ref:a,type:"button",className:i,style:l}))});function La(e){var a,t,r=C(),s=r.dir,o=r.locale,i=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,d=c.labelNext,h=r.components;if(!e.nextMonth&&!e.previousMonth)return n.jsx(n.Fragment,{});var p=f(e.previousMonth,{locale:o}),x=[i.nav_button,i.nav_button_previous].join(" "),y=d(e.nextMonth,{locale:o}),_=[i.nav_button,i.nav_button_next].join(" "),u=(a=h==null?void 0:h.IconRight)!==null&&a!==void 0?a:Oa,w=(t=h==null?void 0:h.IconLeft)!==null&&t!==void 0?t:Pa;return n.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&n.jsx(pe,{name:"previous-month","aria-label":p,className:x,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?n.jsx(u,{className:i.nav_icon,style:l.nav_icon}):n.jsx(w,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&n.jsx(pe,{name:"next-month","aria-label":y,className:_,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?n.jsx(w,{className:i.nav_icon,style:l.nav_icon}):n.jsx(u,{className:i.nav_icon,style:l.nav_icon})})]})}function Je(e){var a=C().numberOfMonths,t=de(),r=t.previousMonth,s=t.nextMonth,o=t.goToMonth,i=t.displayMonths,l=i.findIndex(function(y){return Te(e.displayMonth,y)}),c=l===0,f=l===i.length-1,d=a>1&&(c||!f),h=a>1&&(f||!c),p=function(){r&&o(r)},x=function(){s&&o(s)};return n.jsx(La,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:x})}function Ia(e){var a,t=C(),r=t.classNames,s=t.disableNavigation,o=t.styles,i=t.captionLayout,l=t.components,c=(a=l==null?void 0:l.CaptionLabel)!==null&&a!==void 0?a:lt,f;return s?f=n.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?f=n.jsx(Xe,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?f=n.jsxs(n.Fragment,{children:[n.jsx(Xe,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),n.jsx(Je,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=n.jsxs(n.Fragment,{children:[n.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(Je,{displayMonth:e.displayMonth,id:e.id})]}),n.jsx("div",{className:r.caption,style:o.caption,children:f})}function Ea(e){var a=C(),t=a.footer,r=a.styles,s=a.classNames.tfoot;return t?n.jsx("tfoot",{className:s,style:r.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:t})})}):n.jsx(n.Fragment,{})}function Wa(e,a,t){for(var r=t?Oe(new Date):oe(new Date,{locale:e,weekStartsOn:a}),s=[],o=0;o<7;o++){var i=P(r,o);s.push(i)}return s}function Ta(){var e=C(),a=e.classNames,t=e.styles,r=e.showWeekNumber,s=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,f=Wa(s,o,i);return n.jsxs("tr",{style:t.head_row,className:a.head_row,children:[r&&n.jsx("td",{style:t.head_cell,className:a.head_cell}),f.map(function(d,h){return n.jsx("th",{scope:"col",className:a.head_cell,style:t.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function Fa(){var e,a=C(),t=a.classNames,r=a.styles,s=a.components,o=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:Ta;return n.jsx("thead",{style:r.head,className:t.head,children:n.jsx(o,{})})}function Aa(e){var a=C(),t=a.locale,r=a.formatters.formatDay;return n.jsx(n.Fragment,{children:r(e.date,{locale:t})})}var Fe=b.createContext(void 0);function Ra(e){if(!le(e.initialProps)){var a={selected:void 0,modifiers:{disabled:[]}};return n.jsx(Fe.Provider,{value:a,children:e.children})}return n.jsx(Ba,{initialProps:e.initialProps,children:e.children})}function Ba(e){var a=e.initialProps,t=e.children,r=a.selected,s=a.min,o=a.max,i=function(f,d,h){var p,x;(p=a.onDayClick)===null||p===void 0||p.call(a,f,d,h);var y=!!(d.selected&&s&&(r==null?void 0:r.length)===s);if(!y){var _=!!(!d.selected&&o&&(r==null?void 0:r.length)===o);if(!_){var u=r?ot([],r):[];if(d.selected){var w=u.findIndex(function(g){return L(f,g)});u.splice(w,1)}else u.push(f);(x=a.onSelect)===null||x===void 0||x.call(a,u,f,d,h)}}},l={disabled:[]};r&&l.disabled.push(function(f){var d=o&&r.length>o-1,h=r.some(function(p){return L(p,f)});return!!(d&&!h)});var c={selected:r,onDayClick:i,modifiers:l};return n.jsx(Fe.Provider,{value:c,children:t})}function Ae(){var e=b.useContext(Fe);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Ya(e,a){var t=a||{},r=t.from,s=t.to;return r&&s?L(s,e)&&L(r,e)?void 0:L(s,e)?{from:s,to:void 0}:L(r,e)?void 0:Me(r,e)?{from:e,to:s}:{from:r,to:e}:s?Me(e,s)?{from:s,to:e}:{from:e,to:s}:r?st(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var Re=b.createContext(void 0);function Ha(e){if(!ce(e.initialProps)){var a={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return n.jsx(Re.Provider,{value:a,children:e.children})}return n.jsx($a,{initialProps:e.initialProps,children:e.children})}function $a(e){var a=e.initialProps,t=e.children,r=a.selected,s=r||{},o=s.from,i=s.to,l=a.min,c=a.max,f=function(x,y,_){var u,w;(u=a.onDayClick)===null||u===void 0||u.call(a,x,y,_);var g=Ya(x,r);(w=a.onSelect)===null||w===void 0||w.call(a,g,x,y,_)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],i?(d.range_end=[i],L(o,i)||(d.range_middle=[{after:o,before:i}])):d.range_end=[o]):i&&(d.range_start=[i],d.range_end=[i]),l&&(o&&!i&&d.disabled.push({after:Ne(o,l-1),before:P(o,l-1)}),o&&i&&d.disabled.push({after:o,before:P(o,l-1)}),!o&&i&&d.disabled.push({after:Ne(i,l-1),before:P(i,l-1)})),c){if(o&&!i&&(d.disabled.push({before:P(o,-c+1)}),d.disabled.push({after:P(o,c-1)})),o&&i){var h=q(i,o)+1,p=c-h;d.disabled.push({before:Ne(o,p)}),d.disabled.push({after:P(i,p)})}!o&&i&&(d.disabled.push({before:P(i,-c+1)}),d.disabled.push({after:P(i,c-1)}))}return n.jsx(Re.Provider,{value:{selected:r,onDayClick:f,modifiers:d},children:t})}function Be(){var e=b.useContext(Re);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function ve(e){return Array.isArray(e)?ot([],e):e!==void 0?[e]:[]}function Va(e){var a={};return Object.entries(e).forEach(function(t){var r=t[0],s=t[1];a[r]=ve(s)}),a}var B;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(B||(B={}));var qa=B.Selected,$=B.Disabled,Ua=B.Hidden,za=B.Today,_e=B.RangeEnd,we=B.RangeMiddle,Ce=B.RangeStart,Ga=B.Outside;function Ka(e,a,t){var r,s=(r={},r[qa]=ve(e.selected),r[$]=ve(e.disabled),r[Ua]=ve(e.hidden),r[za]=[e.today],r[_e]=[],r[we]=[],r[Ce]=[],r[Ga]=[],r);return e.fromDate&&s[$].push({before:e.fromDate}),e.toDate&&s[$].push({after:e.toDate}),le(e)?s[$]=s[$].concat(a.modifiers[$]):ce(e)&&(s[$]=s[$].concat(t.modifiers[$]),s[Ce]=t.modifiers[Ce],s[we]=t.modifiers[we],s[_e]=t.modifiers[_e]),s}var ut=b.createContext(void 0);function Za(e){var a=C(),t=Ae(),r=Be(),s=Ka(a,t,r),o=Va(a.modifiers),i=j(j({},s),o);return n.jsx(ut.Provider,{value:i,children:e.children})}function ft(){var e=b.useContext(ut);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Xa(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Ja(e){return!!(e&&typeof e=="object"&&"from"in e)}function Qa(e){return!!(e&&typeof e=="object"&&"after"in e)}function en(e){return!!(e&&typeof e=="object"&&"before"in e)}function tn(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function an(e,a){var t,r=a.from,s=a.to;if(r&&s){var o=q(s,r)<0;o&&(t=[s,r],r=t[0],s=t[1]);var i=q(e,r)>=0&&q(s,e)>=0;return i}return s?L(s,e):r?L(r,e):!1}function nn(e){return tt(e)}function rn(e){return Array.isArray(e)&&e.every(tt)}function sn(e,a){return a.some(function(t){if(typeof t=="boolean")return t;if(nn(t))return L(e,t);if(rn(t))return t.includes(e);if(Ja(t))return an(e,t);if(tn(t))return t.dayOfWeek.includes(e.getDay());if(Xa(t)){var r=q(t.before,e),s=q(t.after,e),o=r>0,i=s<0,l=Me(t.before,t.after);return l?i&&o:o||i}return Qa(t)?q(e,t.after)>0:en(t)?q(t.before,e)>0:typeof t=="function"?t(e):!1})}function Ye(e,a,t){var r=Object.keys(a).reduce(function(o,i){var l=a[i];return sn(e,l)&&o.push(i),o},[]),s={};return r.forEach(function(o){return s[o]=!0}),t&&!Te(e,t)&&(s.outside=!0),s}function on(e,a){for(var t=I(e[0]),r=Ie(e[e.length-1]),s,o,i=t;i<=r;){var l=Ye(i,a),c=!l.disabled&&!l.hidden;if(!c){i=P(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),s||(s=i),i=P(i,1)}return o||s}var ln=365;function mt(e,a){var t=a.moveBy,r=a.direction,s=a.context,o=a.modifiers,i=a.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=s.weekStartsOn,f=s.fromDate,d=s.toDate,h=s.locale,p={day:P,week:ke,month:F,year:qt,startOfWeek:function(u){return s.ISOWeek?Oe(u):oe(u,{locale:h,weekStartsOn:c})},endOfWeek:function(u){return s.ISOWeek?rt(u):We(u,{locale:h,weekStartsOn:c})}},x=p[t](e,r==="after"?1:-1);r==="before"&&f?x=Ut([f,x]):r==="after"&&d&&(x=zt([d,x]));var y=!0;if(o){var _=Ye(x,o);y=!_.disabled&&!_.hidden}return y?x:l.count>ln?l.lastFocused:mt(x,{moveBy:t,direction:r,context:s,modifiers:o,retry:j(j({},l),{count:l.count+1})})}var vt=b.createContext(void 0);function cn(e){var a=de(),t=ft(),r=b.useState(),s=r[0],o=r[1],i=b.useState(),l=i[0],c=i[1],f=on(a.displayMonths,t),d=s??(l&&a.isDateDisplayed(l))?l:f,h=function(){c(s),o(void 0)},p=function(u){o(u)},x=C(),y=function(u,w){if(s){var g=mt(s,{moveBy:u,direction:w,context:x,modifiers:t});L(s,g)||(a.goToDate(g,s),p(g))}},_={focusedDay:s,focusTarget:d,blur:h,focus:p,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return n.jsx(vt.Provider,{value:_,children:e.children})}function He(){var e=b.useContext(vt);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function dn(e,a){var t=ft(),r=Ye(e,t,a);return r}var $e=b.createContext(void 0);function un(e){if(!xe(e.initialProps)){var a={selected:void 0};return n.jsx($e.Provider,{value:a,children:e.children})}return n.jsx(fn,{initialProps:e.initialProps,children:e.children})}function fn(e){var a=e.initialProps,t=e.children,r=function(o,i,l){var c,f,d;if((c=a.onDayClick)===null||c===void 0||c.call(a,o,i,l),i.selected&&!a.required){(f=a.onSelect)===null||f===void 0||f.call(a,void 0,o,i,l);return}(d=a.onSelect)===null||d===void 0||d.call(a,o,o,i,l)},s={selected:a.selected,onDayClick:r};return n.jsx($e.Provider,{value:s,children:t})}function ht(){var e=b.useContext($e);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function mn(e,a){var t=C(),r=ht(),s=Ae(),o=Be(),i=He(),l=i.focusDayAfter,c=i.focusDayBefore,f=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,p=i.focus,x=i.focusMonthBefore,y=i.focusMonthAfter,_=i.focusYearBefore,u=i.focusYearAfter,w=i.focusStartOfWeek,g=i.focusEndOfWeek,S=function(m){var v,O,T,U;xe(t)?(v=r.onDayClick)===null||v===void 0||v.call(r,e,a,m):le(t)?(O=s.onDayClick)===null||O===void 0||O.call(s,e,a,m):ce(t)?(T=o.onDayClick)===null||T===void 0||T.call(o,e,a,m):(U=t.onDayClick)===null||U===void 0||U.call(t,e,a,m)},D=function(m){var v;p(e),(v=t.onDayFocus)===null||v===void 0||v.call(t,e,a,m)},A=function(m){var v;h(),(v=t.onDayBlur)===null||v===void 0||v.call(t,e,a,m)},R=function(m){var v;(v=t.onDayMouseEnter)===null||v===void 0||v.call(t,e,a,m)},H=function(m){var v;(v=t.onDayMouseLeave)===null||v===void 0||v.call(t,e,a,m)},K=function(m){var v;(v=t.onDayPointerEnter)===null||v===void 0||v.call(t,e,a,m)},Z=function(m){var v;(v=t.onDayPointerLeave)===null||v===void 0||v.call(t,e,a,m)},te=function(m){var v;(v=t.onDayTouchCancel)===null||v===void 0||v.call(t,e,a,m)},ae=function(m){var v;(v=t.onDayTouchEnd)===null||v===void 0||v.call(t,e,a,m)},X=function(m){var v;(v=t.onDayTouchMove)===null||v===void 0||v.call(t,e,a,m)},ne=function(m){var v;(v=t.onDayTouchStart)===null||v===void 0||v.call(t,e,a,m)},k=function(m){var v;(v=t.onDayKeyUp)===null||v===void 0||v.call(t,e,a,m)},E=function(m){var v;switch(m.key){case"ArrowLeft":m.preventDefault(),m.stopPropagation(),t.dir==="rtl"?l():c();break;case"ArrowRight":m.preventDefault(),m.stopPropagation(),t.dir==="rtl"?c():l();break;case"ArrowDown":m.preventDefault(),m.stopPropagation(),f();break;case"ArrowUp":m.preventDefault(),m.stopPropagation(),d();break;case"PageUp":m.preventDefault(),m.stopPropagation(),m.shiftKey?_():x();break;case"PageDown":m.preventDefault(),m.stopPropagation(),m.shiftKey?u():y();break;case"Home":m.preventDefault(),m.stopPropagation(),w();break;case"End":m.preventDefault(),m.stopPropagation(),g();break}(v=t.onDayKeyDown)===null||v===void 0||v.call(t,e,a,m)},N={onClick:S,onFocus:D,onBlur:A,onKeyDown:E,onKeyUp:k,onMouseEnter:R,onMouseLeave:H,onPointerEnter:K,onPointerLeave:Z,onTouchCancel:te,onTouchEnd:ae,onTouchMove:X,onTouchStart:ne};return N}function vn(){var e=C(),a=ht(),t=Ae(),r=Be(),s=xe(e)?a.selected:le(e)?t.selected:ce(e)?r.selected:void 0;return s}function hn(e){return Object.values(B).includes(e)}function pn(e,a){var t=[e.classNames.day];return Object.keys(a).forEach(function(r){var s=e.modifiersClassNames[r];if(s)t.push(s);else if(hn(r)){var o=e.classNames["day_".concat(r)];o&&t.push(o)}}),t}function xn(e,a){var t=j({},e.styles.day);return Object.keys(a).forEach(function(r){var s;t=j(j({},t),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),t}function yn(e,a,t){var r,s,o,i=C(),l=He(),c=dn(e,a),f=mn(e,c),d=vn(),h=!!(i.onDayClick||i.mode!=="default");b.useEffect(function(){var R;c.outside||l.focusedDay&&h&&L(l.focusedDay,e)&&((R=t.current)===null||R===void 0||R.focus())},[l.focusedDay,e,t,h,c.outside]);var p=pn(i,c).join(" "),x=xn(i,c),y=!!(c.outside&&!i.showOutsideDays||c.hidden),_=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:Aa,u=n.jsx(_,{date:e,displayMonth:a,activeModifiers:c}),w={style:x,className:p,children:u,role:"gridcell"},g=l.focusTarget&&L(l.focusTarget,e)&&!c.outside,S=l.focusedDay&&L(l.focusedDay,e),D=j(j(j({},w),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=S||g?0:-1,r)),f),A={isButton:h,isHidden:y,activeModifiers:c,selectedDays:d,buttonProps:D,divProps:w};return A}function gn(e){var a=b.useRef(null),t=yn(e.date,e.displayMonth,a);return t.isHidden?n.jsx("div",{role:"gridcell"}):t.isButton?n.jsx(pe,j({name:"day",ref:a},t.buttonProps)):n.jsx("div",j({},t.divProps))}function bn(e){var a=e.number,t=e.dates,r=C(),s=r.onWeekNumberClick,o=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,d=f(Number(a),{locale:l});if(!s)return n.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:d});var h=c(Number(a),{locale:l}),p=function(x){s(a,t,x)};return n.jsx(pe,{name:"week-number","aria-label":h,className:i.weeknumber,style:o.weeknumber,onClick:p,children:d})}function Nn(e){var a,t,r=C(),s=r.styles,o=r.classNames,i=r.showWeekNumber,l=r.components,c=(a=l==null?void 0:l.Day)!==null&&a!==void 0?a:gn,f=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:bn,d;return i&&(d=n.jsx("td",{className:o.cell,style:s.cell,children:n.jsx(f,{number:e.weekNumber,dates:e.dates})})),n.jsxs("tr",{className:o.row,style:s.row,children:[d,e.dates.map(function(h){return n.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:n.jsx(c,{displayMonth:e.displayMonth,date:h})},Zt(h))})]})}function Qe(e,a,t){for(var r=t!=null&&t.ISOWeek?rt(a):We(a,t),s=t!=null&&t.ISOWeek?Oe(e):oe(e,t),o=q(r,s),i=[],l=0;l<=o;l++)i.push(P(s,l));var c=i.reduce(function(f,d){var h=t!=null&&t.ISOWeek?Lt(d):It(d,t),p=f.find(function(x){return x.weekNumber===h});return p?(p.dates.push(d),f):(f.push({weekNumber:h,dates:[d]}),f)},[]);return c}function jn(e,a){var t=Qe(I(e),Ie(e),a);if(a!=null&&a.useFixedWeeks){var r=Jt(e,a);if(r<6){var s=t[t.length-1],o=s.dates[s.dates.length-1],i=ke(o,6-r),l=Qe(ke(o,1),i,a);t.push.apply(t,l)}}return t}function _n(e){var a,t,r,s=C(),o=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,f=s.fixedWeeks,d=s.components,h=s.weekStartsOn,p=s.firstWeekContainsDate,x=s.ISOWeek,y=jn(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:x,locale:o,weekStartsOn:h,firstWeekContainsDate:p}),_=(a=d==null?void 0:d.Head)!==null&&a!==void 0?a:Fa,u=(t=d==null?void 0:d.Row)!==null&&t!==void 0?t:Nn,w=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:Ea;return n.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&n.jsx(_,{}),n.jsx("tbody",{className:i.tbody,style:l.tbody,children:y.map(function(g){return n.jsx(u,{displayMonth:e.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),n.jsx(w,{displayMonth:e.displayMonth})]})}function wn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Cn=wn()?b.useLayoutEffect:b.useEffect,Se=!1,Sn=0;function et(){return"react-day-picker-".concat(++Sn)}function Dn(e){var a,t=e??(Se?et():null),r=b.useState(t),s=r[0],o=r[1];return Cn(function(){s===null&&o(et())},[]),b.useEffect(function(){Se===!1&&(Se=!0)},[]),(a=e??s)!==null&&a!==void 0?a:void 0}function kn(e){var a,t,r=C(),s=r.dir,o=r.classNames,i=r.styles,l=r.components,c=de().displayMonths,f=Dn(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,h=[o.month],p=i.month,x=e.displayIndex===0,y=e.displayIndex===c.length-1,_=!x&&!y;s==="rtl"&&(a=[x,y],y=a[0],x=a[1]),x&&(h.push(o.caption_start),p=j(j({},p),i.caption_start)),y&&(h.push(o.caption_end),p=j(j({},p),i.caption_end)),_&&(h.push(o.caption_between),p=j(j({},p),i.caption_between));var u=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:Ia;return n.jsxs("div",{className:h.join(" "),style:p,children:[n.jsx(u,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(_n,{id:d,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function Mn(e){var a=C(),t=a.classNames,r=a.styles;return n.jsx("div",{className:t.months,style:r.months,children:e.children})}function Pn(e){var a,t,r=e.initialProps,s=C(),o=He(),i=de(),l=b.useState(!1),c=l[0],f=l[1];b.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),f(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=j(j({},s.styles.root),s.style),p=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,_){var u;return j(j({},y),(u={},u[_]=r[_],u))},{}),x=(t=(a=r.components)===null||a===void 0?void 0:a.Months)!==null&&t!==void 0?t:Mn;return n.jsx("div",j({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:n.jsx(x,{children:i.displayMonths.map(function(y,_){return n.jsx(kn,{displayIndex:_,displayMonth:y},_)})})}))}function On(e){var a=e.children,t=ea(e,["children"]);return n.jsx(ga,{initialProps:t,children:n.jsx(Ma,{children:n.jsx(un,{initialProps:t,children:n.jsx(Ra,{initialProps:t,children:n.jsx(Ha,{initialProps:t,children:n.jsx(Za,{children:n.jsx(cn,{children:a})})})})})})})}function Ln(e){return n.jsx(On,j({},e,{children:n.jsx(Pn,{initialProps:e})}))}function pt({className:e,classNames:a,showOutsideDays:t=!0,...r}){return n.jsx(Ln,{showOutsideDays:t,className:ge("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4 w-full",caption:"flex justify-center pt-1 relative items-center mb-4",caption_label:"text-base font-semibold",nav:"space-x-1 flex items-center",nav_button:ge(Ve({variant:"outline"}),"h-8 w-8 bg-transparent p-0 opacity-50 hover:opacity-100 hover:bg-accent transition-colors"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse",head_row:"grid grid-cols-7 mb-1",head_cell:"text-muted-foreground font-medium text-[0.8rem] text-center py-2",row:"grid grid-cols-7 gap-1",cell:"relative text-center text-sm p-0.5 focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent/50 [&:has([aria-selected])]:rounded-md",day:ge(Ve({variant:"ghost"}),"h-10 w-full p-0 font-normal aria-selected:opacity-100 hover:bg-accent/80 rounded-md transition-colors"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground shadow-sm",day_today:"bg-accent text-accent-foreground font-semibold",day_outside:"day-outside text-muted-foreground opacity-40 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-30 cursor-not-allowed",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({...s})=>n.jsx(at,{className:"h-4 w-4"}),IconRight:({...s})=>n.jsx(Et,{className:"h-4 w-4"})},...r})}pt.displayName="Calendar";function In({slots:e,selectedDate:a,onSelectSlot:t}){if(e.length===0)return n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(De,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No hay horarios disponibles para esta fecha"}),n.jsx("p",{className:"text-sm mt-2",children:"Intenta con otra fecha o profesional"})]});const r=e.sort((o,i)=>o.dateTimeStart.localeCompare(i.dateTimeStart)).reduce((o,i)=>{const l=i.serviceName;return o[l]||(o[l]={slots:[],sortOrder:i.serviceSortOrder??0}),o[l].slots.push(i),o},{}),s=Object.entries(r).sort(([,o],[,i])=>o.sortOrder-i.sortOrder);return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:W(a,"EEEE d 'de' MMMM",{locale:Le})}),n.jsx("div",{className:"max-h-[500px] overflow-y-auto space-y-6 pr-2",children:s.map(([o,{slots:i}])=>n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-semibold text-base text-primary border-b pb-2",children:o}),n.jsx("div",{className:"space-y-2",children:i.map((l,c)=>n.jsx(G,{variant:"outline",className:"w-full justify-start text-left h-auto py-3",onClick:()=>t(l),children:n.jsxs("div",{className:"flex items-center gap-3 w-full",children:[n.jsx(De,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-semibold",children:me(Q(l.dateTimeStart),"America/Santiago","HH:mm")}),l.availableCapacity&&l.availableCapacity>0&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l.availableCapacity," cupos)"]}),n.jsxs("div",{className:"flex items-center gap-2 ml-auto text-sm text-muted-foreground",children:[n.jsx(Ee,{className:"h-3 w-3"}),l.professionalName]})]})},c))})]},o))})]})}function En({isOpen:e,onClose:a,onSelectPackage:t,onContinueSingle:r,serviceId:s,singleSessionPrice:o,customerData:i}){const[l,c]=b.useState([]),[f,d]=b.useState(!0),[h,p]=b.useState(null),[x,y]=b.useState(!1);b.useEffect(()=>{e&&_()},[e,s]);const _=async()=>{d(!0);try{const{data:g,error:S}=await V.from("session_packages").select("*").eq("is_active",!0).eq("show_in_upsell_modal",!0).contains("applicable_service_ids",[s]).order("sessions_quantity",{ascending:!0});if(S)throw S;c(g||[])}catch(g){console.error("Error loading packages:",g)}finally{d(!1)}},u=g=>{const S=o*g.sessions_quantity,D=S-g.price_clp,A=Math.round(D/S*100);return{regularPrice:S,savings:D,percentage:A}},w=async g=>{p(g),y(!0);try{const{data:S,error:D}=await V.functions.invoke("purchase-session-package",{body:{packageId:g.id,buyerName:i.name,buyerEmail:i.email,buyerPhone:i.phone,isGiftCard:!1}});if(D)throw D;if(S.initPoint)window.location.href=S.initPoint;else throw new Error("No se pudo generar el link de pago")}catch(S){console.error("Error purchasing package:",S),y(!1),p(null)}};return n.jsx(xt,{open:e,onOpenChange:g=>!g&&!x&&a(),children:n.jsxs(yt,{className:"sm:max-w-lg",children:[n.jsxs(gt,{children:[n.jsxs(bt,{className:"flex items-center gap-2 text-xl",children:[n.jsx(Nt,{className:"h-5 w-5 text-primary"}),"Ahorra con nuestros paquetes"]}),n.jsx(jt,{className:"text-base",children:"Agenda esta sesiÃ³n y aprovecha un precio especial para tus prÃ³ximas visitas."})]}),f?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(ee,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsx("div",{className:"grid gap-3",children:l.map(g=>{const{regularPrice:S,savings:D,percentage:A}=u(g),R=Math.round(g.price_clp/g.sessions_quantity),H=(h==null?void 0:h.id)===g.id;return n.jsxs("button",{onClick:()=>w(g),disabled:x,className:`relative w-full text-left p-4 rounded-xl border-2 transition-all ${H?"border-primary bg-primary/5":"border-muted hover:border-primary/50 hover:bg-muted/50"} ${x&&!H?"opacity-50":""}`,children:[n.jsxs("div",{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground text-xs font-bold px-2 py-1 rounded-full",children:[A,"% OFF"]}),n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-lg",children:[g.sessions_quantity," Sesiones"]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",R.toLocaleString("es-CL")," por sesiÃ³n"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm text-muted-foreground line-through",children:["$",S.toLocaleString("es-CL")]}),n.jsxs("p",{className:"text-xl font-bold text-primary",children:["$",g.price_clp.toLocaleString("es-CL")]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[n.jsx(nt,{className:"h-4 w-4"}),n.jsxs("span",{children:["Ahorras $",D.toLocaleString("es-CL")]})]}),H&&x&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-xl",children:n.jsx(ee,{className:"h-6 w-6 animate-spin text-primary"})})]},g.id)})}),n.jsxs("p",{className:"text-sm text-muted-foreground text-center px-4",children:["RecibirÃ¡s cÃ³digos a tu correo para agendar las sesiones cuando quieras.",n.jsx("br",{}),"VÃ¡lidos por 1 aÃ±o."]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs(G,{variant:"outline",className:"w-full",onClick:r,disabled:x,children:["Continuar con 1 sesiÃ³n ($",o.toLocaleString("es-CL"),")"]})})]})]})})}const Wn=Tt({customerName:fe().min(2,"El nombre debe tener al menos 2 caracteres").max(100),customerEmail:fe().email("Email invÃ¡lido").max(255),customerPhone:fe().min(8,"TelÃ©fono invÃ¡lido").max(20),customerComments:fe().max(500).optional()});function Tn({timeSlot:e,professional:a,service:t,onBack:r}){const[s,o]=b.useState(!1),[i,l]=b.useState(!1),[c,f]=b.useState(null),[d,h]=b.useState(""),[p,x]=b.useState(!1),[y,_]=b.useState(""),[u,w]=b.useState(null),{register:g,handleSubmit:S,formState:{errors:D},getValues:A}=Wt({resolver:Ft(Wn)}),R=async()=>{if(!d.trim()){_("Ingresa un cÃ³digo");return}x(!0),_("");try{const{data:k,error:E}=await V.functions.invoke("validate-session-code",{body:{code:d.toUpperCase(),serviceId:t.id}});if(!E&&(k!=null&&k.valid)){w({type:"session",data:k}),J.success("Â¡CÃ³digo de sesiÃ³n aplicado! Tu sesiÃ³n estÃ¡ prepagada"),x(!1);return}const{data:N,error:m}=await V.functions.invoke("validate-coupon",{body:{code:d.toUpperCase(),serviceId:t.id,purchaseAmount:t.price_clp}});if(!m&&(N!=null&&N.valid)){w({type:"coupon",data:N.coupon}),J.success("Â¡CupÃ³n de descuento aplicado!"),x(!1);return}_("CÃ³digo no vÃ¡lido")}catch(k){console.error("Error validating code:",k),_("Error al validar el cÃ³digo")}finally{x(!1)}},H=()=>{w(null),h(""),_("")},K=()=>{if(!u||u.type==="session")return 0;const k=u.data;return k.discount_type==="percentage"?Math.floor(t.price_clp*k.discount_value/100):k.discount_value},Z=(u==null?void 0:u.type)==="session"?0:t.price_clp-K(),te=!u,ae=async k=>{if(te){f(k),l(!0);return}await X(k)},X=async k=>{o(!0);try{const{data:E,error:N}=await V.functions.invoke("create-booking",{body:{professionalId:e.professionalId,serviceId:t.id,dateTimeStart:e.dateTimeStart,couponCode:(u==null?void 0:u.type)==="coupon"?u.data.code:null,sessionCode:(u==null?void 0:u.type)==="session"?u.data.code:null,...k}});if(N)throw new Error(N.message||"Error al crear la reserva");if(E.confirmed){J.success("Â¡SesiÃ³n confirmada!"),window.location.href="/agenda-nave-studio/success";return}if(E.initPoint)window.location.href=E.initPoint;else throw new Error("No se pudo generar el link de pago")}catch(E){console.error("Error creating booking:",E),J.error(E.message||"Error al agendar la sesiÃ³n"),o(!1)}},ne=()=>{l(!1),c&&X(c)};return n.jsxs(se,{className:"p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Completa tus datos"}),n.jsxs("div",{className:"bg-muted/50 rounded-lg p-5 mb-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-1",children:t.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),n.jsxs("div",{className:"border-t pt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Rt,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-lg font-semibold",children:(u==null?void 0:u.type)==="session"?n.jsx("span",{className:"text-green-600 font-bold",children:"PREPAGADO âœ“"}):(u==null?void 0:u.type)==="coupon"?n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-muted-foreground line-through mr-2",children:["$",t.price_clp.toLocaleString("es-CL")]}),n.jsxs("span",{className:"text-green-600",children:["$",Z.toLocaleString("es-CL")," CLP"]})]}):n.jsxs("span",{children:["$",t.price_clp.toLocaleString("es-CL")," CLP"]})})]}),(u==null?void 0:u.type)==="session"?n.jsx("p",{className:"text-sm text-green-600 ml-7",children:"CÃ³digo de sesiÃ³n aplicado"}):(u==null?void 0:u.type)==="coupon"?n.jsxs("p",{className:"text-sm text-green-600 ml-7",children:["Ahorro: $",K().toLocaleString("es-CL")]}):null]}),n.jsxs("div",{className:"border-t pt-3 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:me(Q(e.dateTimeStart),"America/Santiago","EEEE d 'de' MMMM 'de' yyyy",{locale:Le})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(De,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[me(Q(e.dateTimeStart),"America/Santiago","HH:mm")," - ",me(Q(e.dateTimeEnd),"America/Santiago","HH:mm")]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:a.name})]})]})]}),n.jsxs("div",{className:"bg-primary/5 rounded-lg border border-primary/20 p-4 mb-6",children:[n.jsxs(re,{className:"flex items-center gap-2 mb-3 text-primary",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Â¿Tienes un cÃ³digo de descuento o sesiÃ³n prepagada?"]}),u?n.jsxs("div",{className:"flex items-center justify-between bg-green-50 border border-green-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nt,{className:"h-5 w-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-mono font-bold text-green-700",children:(u.type==="session",u.data.code)}),n.jsx("p",{className:"text-sm text-green-600",children:u.type==="session"?"SesiÃ³n prepagada - No requiere pago adicional":u.data.discount_type==="percentage"?`${u.data.discount_value}% de descuento`:`$${u.data.discount_value.toLocaleString("es-CL")} de descuento`})]})]}),n.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:H,disabled:s,children:n.jsx(_t,{className:"h-4 w-4"})})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ue,{value:d,onChange:k=>h(k.target.value.toUpperCase()),placeholder:"CODIGO",disabled:s||p,className:"font-mono uppercase"}),n.jsx(G,{type:"button",variant:"default",onClick:R,disabled:s||p||!d.trim(),children:p?n.jsx(ee,{className:"h-4 w-4 animate-spin"}):"Aplicar"})]}),y&&n.jsx("p",{className:"text-sm text-destructive",children:y}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["ðŸ’¡ Compra varias sesiones con descuento"," ",n.jsx("a",{href:"/bonos",className:"text-primary underline hover:no-underline font-medium",target:"_blank",rel:"noopener noreferrer",children:"acÃ¡"})]})]})]}),n.jsxs("form",{onSubmit:S(ae),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(re,{htmlFor:"customerName",children:"Nombre completo *"}),n.jsx(ue,{id:"customerName",...g("customerName"),placeholder:"Juan PÃ©rez",disabled:s}),D.customerName&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:D.customerName.message})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"customerEmail",children:"Email *"}),n.jsx(ue,{id:"customerEmail",type:"email",...g("customerEmail"),placeholder:"juan@ejemplo.com",disabled:s}),D.customerEmail&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:D.customerEmail.message})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"customerPhone",children:"Celular *"}),n.jsx(ue,{id:"customerPhone",...g("customerPhone"),placeholder:"+56912345678",disabled:s}),D.customerPhone&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:D.customerPhone.message})]}),n.jsxs("div",{children:[n.jsx(re,{htmlFor:"customerComments",children:"Comentarios (opcional)"}),n.jsx(At,{id:"customerComments",...g("customerComments"),placeholder:"Â¿Algo que debamos saber?",disabled:s,rows:3}),D.customerComments&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:D.customerComments.message})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(G,{type:"button",variant:"outline",onClick:r,disabled:s,className:"flex-1",children:"Volver"}),n.jsx(G,{type:"submit",disabled:s,className:"flex-1",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):(u==null?void 0:u.type)==="session"?"Confirmar sesiÃ³n prepagada":"Agendar y pagar"})]})]}),n.jsx(En,{isOpen:i,onClose:()=>l(!1),onSelectPackage:k=>{},onContinueSingle:ne,serviceId:t.id,singleSessionPrice:t.price_clp,customerData:{name:(c==null?void 0:c.customerName)||"",email:(c==null?void 0:c.customerEmail)||"",phone:(c==null?void 0:c.customerPhone)||""}})]})}const Fn=()=>n.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-primary/10 to-accent/10 rounded-2xl border border-primary/20",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 text-center md:text-left",children:[n.jsx("div",{className:"p-3 bg-primary/20 rounded-full",children:n.jsx($t,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-foreground",children:"Â¿Vienes seguido o quieres venir con un grupo de personas? Ahorra con un Paquete de Sesiones"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Compra sesiones por adelantado y obtÃ©n descuentos. Las puedes compartir con quien tÃº quieras."})]})]}),n.jsx(wt,{to:"/bonos",children:n.jsx(G,{variant:"outline",className:"font-semibold whitespace-nowrap border-primary/30 hover:bg-primary/10",children:"Ver Paquetes"})})]})});function fr(){const{professionalSlug:e,dateParam:a,timeParam:t}=Ct();St();const{trackEvent:r}=Dt(),{trackServerEvent:s}=Vt(),o=b.useRef(null),[i,l]=b.useState([]),[c,f]=b.useState(""),[d,h]=b.useState([]),[p,x]=b.useState([]),[y,_]=b.useState("any");b.useState("");const[u,w]=b.useState(),[g,S]=b.useState(null),[D,A]=b.useState([]),[R,H]=b.useState(!0),[K,Z]=b.useState(!1);b.useEffect(()=>{const N=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;r("ViewContent",{content_name:"Agenda Nave Studio",content_category:"Booking"},N),s({eventName:"ViewContent",eventId:N,contentName:"Agenda Nave Studio"}).catch(()=>{})},[]),b.useEffect(()=>{(async()=>{try{const[m,v,O]=await Promise.all([V.from("branches").select("*").eq("is_active",!0).order("sort_order",{ascending:!0}),V.rpc("get_active_professionals"),V.from("services").select("*").eq("is_active",!0).eq("show_in_agenda",!0).order("sort_order",{ascending:!0})]);if(m.error)throw m.error;if(v.error)throw v.error;if(O.error)throw O.error;const T=m.data||[];l(T);const U=T.find(Y=>Y.is_default)||T[0];U&&f(U.id);const z=(v.data||[]).sort((Y,ye)=>Y.name.localeCompare(ye.name));if(h(z),x(O.data||[]),e&&v.data){const Y=v.data.find(ye=>ye.slug===e);Y&&_(Y.id)}if(a)try{const Y=Q(a);w(Y)}catch(Y){console.error("Invalid date param",Y)}}catch(m){console.error("Error loading data:",m),J.error("Error al cargar los datos")}finally{H(!1)}})()},[e,a]);const te=p.filter(N=>N.branch_id===c),ae=D.filter(N=>te.some(m=>m.id===N.serviceId));b.useEffect(()=>{if(!u)return;(async()=>{Z(!0);try{const m=W(u,"yyyy-MM-dd"),v=y==="any"?null:y,{data:O,error:T}=await V.functions.invoke("get-availability",{body:{date:m,professionalId:v}});if(T)throw T;A(O.slots||[])}catch(m){console.error("Error loading slots:",m),J.error("Error al cargar horarios disponibles"),A([])}finally{Z(!1)}})()},[u,y]);const X=N=>{_(N);const m=d.find(v=>v.id===N);m?window.history.replaceState(null,"",`/agenda-nave-studio/${m.slug}`):window.history.replaceState(null,"","/agenda-nave-studio")},ne=N=>{if(w(N),S(null),N){const m=W(N,"yyyy-MM-dd"),v=d.find(O=>O.id===y);v?window.history.replaceState(null,"",`/agenda-nave-studio/${v.slug}/${m}`):window.history.replaceState(null,"",`/agenda-nave-studio/any/${m}`)}},k=N=>{S(N);const m=p.find(z=>z.id===N.serviceId),v=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;r("InitiateCheckout",{content_name:(m==null?void 0:m.name)||N.serviceName,currency:"CLP",value:(m==null?void 0:m.price_clp)||0},v),s({eventName:"InitiateCheckout",eventId:v,contentName:(m==null?void 0:m.name)||N.serviceName,value:(m==null?void 0:m.price_clp)||0,currency:"CLP"}).catch(()=>{});const O=d.find(z=>z.id===N.professionalId),T=W(u,"yyyy-MM-dd"),U=W(Q(N.dateTimeStart),"HH:mm");O&&window.history.replaceState(null,"",`/agenda-nave-studio/${O.slug}/${T}/${U}`),setTimeout(()=>{var z;(z=o.current)==null||z.scrollIntoView({behavior:"smooth",block:"start"})},100)},E=()=>{if(S(null),u){const N=W(u,"yyyy-MM-dd"),m=d.find(v=>v.id===y);m?window.history.replaceState(null,"",`/agenda-nave-studio/${m.slug}/${N}`):window.history.replaceState(null,"",`/agenda-nave-studio/any/${N}`)}};return R?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(ee,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"min-h-screen bg-background py-8 px-4",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Agenda tu SesiÃ³n"}),n.jsx("p",{className:"text-muted-foreground",children:"Elige profesional, fecha y hora para tu experiencia en Nave Studio"})]}),n.jsx(Fn,{}),g?n.jsxs("div",{ref:o,className:"max-w-2xl mx-auto",children:[n.jsxs(G,{variant:"ghost",onClick:E,className:"mb-4",children:[n.jsx(at,{className:"mr-2 h-4 w-4"}),"Volver a horarios"]}),n.jsx(Tn,{timeSlot:g,professional:d.find(N=>N.id===g.professionalId),service:p.find(N=>N.id===g.serviceId),onBack:E})]}):n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[i.length>1&&n.jsxs(se,{className:"p-4",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sucursal"}),n.jsxs(Ue,{value:c,onValueChange:f,children:[n.jsx(ze,{children:n.jsx(Ge,{})}),n.jsx(Ke,{children:i.map(N=>n.jsx(be,{value:N.id,children:N.name},N.id))})]})]}),n.jsxs(se,{className:"p-4",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Instructor"}),n.jsxs(Ue,{value:y,onValueChange:X,children:[n.jsx(ze,{children:n.jsx(Ge,{})}),n.jsxs(Ke,{children:[n.jsx(be,{value:"any",children:"Cualquiera"}),d.map(N=>n.jsx(be,{value:N.id,children:N.name},N.id))]})]})]}),n.jsx(se,{className:"p-4",children:n.jsx(pt,{mode:"single",selected:u,onSelect:ne,locale:Le,className:"rounded-md border-0",disabled:N=>{const m=new Date;return m.setHours(0,0,0,0),N<m||N>F(m,1)}})})]}),n.jsx("div",{children:n.jsx(se,{className:"p-6",children:u?K?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(ee,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsx(In,{slots:ae,selectedDate:u,onSelectSlot:k}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Ee,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Selecciona una fecha para ver horarios disponibles"})]})})})]})]})}),n.jsx(Ht,{})]})}export{fr as default};
